"use strict";angular.module("angularOauthApp",["ngAnimate","ngCookies","ngResource","ngSanitize","ngTouch","ui.router","satellizer"]).config(["$authProvider","$stateProvider","$urlRouterProvider",function(a,b,c){c.otherwise("/"),b.state("home",{url:"/",templateUrl:"views/_home.html",controller:"HomeCtrl"}),a.facebook({clientId:"1763699113853883",name:"facebook",url:"https://fast-depths-23646.herokuapp.com/auth/facebook",authorizationEndpoint:"https://www.facebook.com/v2.5/dialog/oauth",redirectUri:window.location.origin+"/",requiredUrlParams:["display","scope"],scope:["email"],scopeDelimiter:",",display:"popup",type:"2.0",popupOptions:{width:580,height:400}})}]);var n=0;angular.module("angularOauthApp").controller("HomeCtrl",["$scope","$auth","User",function(a,b,c){console.log(n++),console.log("home"),console.log("hit the route"),console.log(!localStorage.getItem("satellizer_token")),a.user=c.user,localStorage.getItem("satellizer_token")&&localStorage.getItem("satellizer_token")!=={}?(console.log("hit it"),c.getUser().then(function(b){console.log(b.data),a.user=b.data}),a.getPayload=b.getPayload):(a.getPayload="init getpayload",a.user="init user"),a.authenticate=function(d){console.log("auth"),console.log(window.location.origin),b.authenticate(d).then(function(){c.getUser().then(function(b){console.log(b.data),a.user=b.data}),console.log(a.user),a.getPayload=b.getPayload})},console.log(a.user),console.log(a.getPayload),a.logout=function(){b.logout(),a.getPayload="",a.user=""},a.isAuthenticated=function(){return b.isAuthenticated()}}]),angular.module("angularOauthApp").factory("User",["$http",function(a){var b=function(){return a.get("https://fast-depths-23646.herokuapp.com/me")};return{getUser:b}}]),angular.module("angularOauthApp").run(["$templateCache",function(a){a.put("views/_home.html",'<div ng-if="!isAuthenticated()"> <button ng-click="authenticate(\'facebook\')">Sign in with Facebook</button> </div> <div ng-if="isAuthenticated()"> <button ng-click="logout()">login out</button> </div> <!-- <div ng-if="isAuthenticated()"> --> <p>{{getPayload}}</p> <p>{{user.displayName}}</p> <p>{{user}}</p> <p>{{error}}</p> <p>{{message}}</p> <!-- </div> -->'),a.put("views/_login.html",'<div ng-if="!isAuthenticated()"> <button ng-click="authenticate(\'facebook\')">Sign in with Facebook</button> </div> <div ng-if="isAuthenticated()"> <button ng-click="logout()">login out</button> </div> <div ng-if="isAuthenticated()"> <p>{{getPayload.user_id}}</p> <p>{{user.displayName}}</p> <p>{{user}}</p> </div>')}]);